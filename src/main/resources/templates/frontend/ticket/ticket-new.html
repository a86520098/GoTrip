<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<style>
    .btn1 {
        background: mediumpurple;
        width: 150px;
        color: white;
        border-radius: 5px;
        font-size: 15px;
        text-align: center;
    }
</style>
<head th:replace="frontend/partials/fragment :: head"></head>

<body class="">
<!-- Header -->
<header th:replace="frontend/partials/fragment :: header"></header>
<!-- Cart 購物車 -->
<div th:replace="frontend/partials/fragment :: cart"></div>

<section class="bg-img1 txt-center p-lr-15 p-tb-92"
         th:style="'background-image: url(' + @{/images/bg-01.jpg} + ');'">
    <h2 class="ltext-103 font-weight-bold clwhite txt-center">門票管理</h2>
</section>
<!-- Product 內文 -->
<div class="bg0">
    <div class="container">
        <div class="row">
            <div class="col-md-3 p-b-80 bg6">
                <div class="side-menu">
                    <div class="p-t-55">
                        <h2 class="ltext-103 cl5 font-weight-bold m-b-30 p-lr-20">門票管理</h2>
                        <ul class="p-lr-20">
                            <li class="bor18">
                                <a th:href="@{#}" class="dis-block mtext-110 cl5 hov-cl1 trans-04 p-tb-12 ">
                                    檢視訂單
                                </a>
                            </li>
                            <li class="bor18">
                                <a th:href="@{/vendor/ticket/1}"
                                   class="dis-block mtext-110 cl5 hov-cl1 trans-04 p-tb-12 ">
                                    門票列表
                                </a>
                            </li>
                            <li class="bor18">
                                <a th:href="@{/vendor/ticket/addTicket}"
                                   class="dis-block mtext-110 cl5 hov-cl1 trans-04 p-tb-12 ">
                                    新增門票
                                </a>
                            </li>
                            <!-- <li class="bor18">
                                <a th:href="@{/vendor/cars/options/form}"
                                   class="dis-block mtext-110 cl5 hov-cl1 trans-04 p-tb-12 ">
                                    新增房間
                                </a>
                            </li> -->
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Block2 -->
            <div class="col-md-9 grid-margin my-5 pl-5">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title font-weight-bold">新增門票</h4>
                        <form id="insert-loc-form" name="form" th:action="@{/vendor/ticket}" method="post" th:object="${ticket}" class="form-horizontal needs-validation">
                        <!-- enctype="multipart/form-data" -->

                        <!-- <p class="card-description mt-4">景點資料</p> -->
<!--                         <input th:field="*{ticketNo}" id="ticketNo" name="ticketNoId" type="hidden"/> -->
<!--                         <input th:field="*{companyId}" id="companyId" type="hidden" value="1"/> -->
                        <!-- <input th:field="*{companyName}" id="companyName" type="hidden"/> -->
                        <div class="row form-group my-4">
                            <div class="col-lg-1"></div>
                            <label class="col-lg-2 col-form-label" for="ticketName">景點名稱</label>
                            <div class="col-lg-7">
                                <input th:field="*{ticketName}" id="nameId" type="text" class="form-control" placeholder="請輸入景點名稱"/>
                                <div class="invalid-feedback">請輸入景點名稱</div>
                            </div>
                        </div>

                        <!-- 行政區、縣市區 -->
                        <div class="row form-group my-4">
                            <div class="col-lg-1"></div>
                            <label class="col-lg-2 col-form-label" for="county">縣市行政區</label>
                            <div class="col-lg-7">
                                <div class="city-selector-set row" >
                                    <div class="col-4 pr-0">
                                        <p id="countryId" th:text="*{country}" hidden="true"></p>
                                        <select class="form-control county bgwhite" style="background-color: white" th:field="*{country}">
                                            <option value="台灣">台灣</option>
                                        </select>
                                    </div>
                                    <div class="col-4 pr-0">
                                        <select id="city" name="city" placeholder=" "class="form-control district bgwhite" style="background-color: white" th:field="*{city}" data-city="#city"></select>
                                        <div class="invalid-feedback">請選擇縣市</div>
                                    </div>
                                    <div class="col-4">
                                        <select id="dist" name="location"  placeholder=" " class="form-control district bgwhite" style="background-color: white" th:field="*{location}" data-dist="#dist"></select>
                                        <div class="invalid-feedback">請選擇行政區</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 地址 -->
                        <div class="row form-group my-4">
                            <div class="col-lg-1"></div>
                            <label class="col-lg-2 col-form-label" for="address">地址</label>
                            <div class="col-lg-7">
                                <input th:field="*{address}" id="addressId" type="text" class="form-control" placeholder="地址不須重複輸入縣市及行政區"/>
                                <div class="invalid-feedback">請輸入地址</div>
                            </div>
                        </div>
                        <!-- 電話 -->
                        <div class="row form-group my-4">
                          <div class="col-lg-1"></div>
                          <label class="col-lg-2 col-form-label" for="phone">連絡電話</label>
                          <div class="col-lg-7">
                              <input th:field="*{phone}" id="phoneId" type="text" class="form-control" placeholder="0212345678"/>
                              <div class="invalid-feedback">請輸入正確的電話格式</div>
                          </div>
                        </div>
                        <!-- 價格 -->
                        <div class="row form-group my-4">
                          <div class="col-lg-1"></div>
                          <!-- <input th:field="*{ticketNo}" id="ticketNo" type="hidden" class="form-control" placeholder="" /> -->
                          <label class="col-lg-2 col-form-label" for="price">門票價格</label>
                        <div class="col-lg-7">
                            <input th:field="*{price}" id="priceId" type="text" class="form-control"/>
                            <div class="invalid-feedback">請輸入價格</div>
                        </div>
                        </div>

                        <!-- 標籤 -->
                        <div class="row form-group my-4">
                        <div class="col-lg-1"></div>
                        <label class="col-lg-2 col-form-label" for="tagNo">標籤</label>
                        <div class="col-lg-7">
                            <div class="city-selector-set row" >
                                <div class="col-4 pr-0">
                                    <p id="tagNoId" th:text="*{tagNo}" hidden="true"></p>
                                    <select class="form-control county bgwhite" style="background-color: white" th:field="*{tagNo}" id="sel">
                                        <option value="0">請選擇</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>
                                <div class="col-4 pr-0">
                                    <p id="tagName" th:text="*{tagName}" hidden="true"></p>
                                    <select class="form-control district bgwhite" style="background-color: white" th:field="*{tagName}" data-city="#city" id="sel2" readonly>
                                    </select>
                                </div>
                                <!-- 圖片 -->
                                <!-- <div class="col-4 pr-0">
                                    <input type="file" class="form-control custom-file-input py-2 bgwhite" style="background-color: white; padding-bottom: 3px" name="imagefiles" id="imagefiles" multiple/>
                                   <div class="row" id="imagefiles">
                                       <div class="col-12">
                                           <img class="img-responsive my-4" alt="image" width="100%" height="auto" th:src="@{*{images}}" />
                                       </div>
                                   </div>
                                </div> -->
                            </div>
                        </div>


                        <!-- 圖片 -->
                        <!-- <div class="row form-group my-4">
                            <div class="col-lg-1"></div>
                            <label class="col-lg-2 col-form-label" for="images">景點照片</label>
                            <div class="col-lg-7">
                                <div class="col-4 pr-0">
                                 <input type="file" class="form-control custom-file-input py-2 bgwhite" style="background-color: white; padding-bottom: 3px" name="imagefiles" id="imagefiles" multiple/>
                                <div class="row" id="imagefiles">
                                    <div class="col-12">
                                        <img class="img-responsive my-4" alt="image" width="100%" height="auto" th:src="@{*{images}}" />
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div> -->
                        <!-- <div class="row form-group my-4">
                            <div class="col-lg-1"></div>
                            <label class="col-lg-2 col-form-label" for="images">景點照片</label>
                            <div class="col-lg-7">
                                <input type="file" class="form-control custom-file-input py-2 bgwhite" style="background-color: white; padding-bottom: 3px" name="imagefiles" id="imagefiles" multiple/>
                                <div class="row" id="imagefiles">
                                    <div class="col-12">
                                        <img class="img-responsive my-4" alt="image" width="100%" height="auto" th:src="@{*{images}}" />
                                    </div>
                                </div>
                            </div>
                        </div> -->
                        
                        <!-- 簡介 -->
                       <div class="row form-group my-4">
                           <div class="col-lg-1"></div>
                           <label class="col-lg-2 col-form-label" for="descriptionId">景點商品說明</label>
                           <div class="col-lg-7">
                               <textarea name="ticketIntro" th:field="*{ticketIntro}" id="descriptionId" ></textarea>
                           </div>
                       </div>
                        <!-- <input th:field="*{images}" type="hidden" class="form-control" /> -->
                        <!-- <input th:field="*{longitude}" id="longitude" type="hidden" class="form-control" /> -->
                        <!-- <input th:field="*{latitude}" id="latitude" type="hidden" class="form-control" /> -->

                   
                        <div class="d-flex justify-content-end mr-5 my-5">
<!--                             <button id="btn-insert-wrong-loc" type="button" class="btn btn-light mr-2 justify-content-end mr-4"> -->
<!--                                 錯誤輸入 -->
<!--                             </button> -->
                            <button id="correctInput" type="button" class="btn btn-light mr-2 justify-content-end mr-4">
                                正確輸入
                            </button>
                            <button id="btn-insert-loc" type="submit" class="btn btn-warning justify-content-end">
                                儲存資料
                            </button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer th:replace="frontend/partials/fragment :: footer"></footer>
<!-- Back to top -->
<div th:replace="frontend/partials/fragment :: toTop"></div>

<!-- javascript -->
<div th:replace="frontend/partials/fragment :: script"></div>

<script th:src="@{/vendors/sweetalert/sweetalert2.all.min.js}" src="vendors/sweetalert/sweetalert2.all.min.js"></script>
<script th:src="@{/vendors/datatables.net/jquery.dataTables.js}"
        src="vendors/datatables.net/jquery.dataTables.js"></script>
<script th:src="@{/vendors/datatables.net-bs4/dataTables.bootstrap4.js}"
        src="vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
<script th:src="@{/js/dataTables.select.min.js}" src="js/dataTables.select.min.js"></script>

<!-- sweet alert -->
<script th:src="@{/js/ticketTableJS/sweetalert2.js}" src="../../static/js/ticketTableJS/sweetalert2.js"></script>

<!-- ckeditor -->
<script src="//cdn.ckeditor.com/4.19.0/standard/ckeditor.js"></script>
<!-- <script src="//cdn.ckeditor.com/4.19.0/full/ckeditor.js"></script> -->

<!-- 城市及地區判斷 -->
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script type='text/javascript' src="https://demeter.5fpro.com/tw/zipcode-selector.js"></script>
<script type='text/javascript' class="js-demeter-tw-zipcode-selector" data-city="#city" data-dist="#dist"></script>
<script type="text/javascript"></script>
<script th:src="@{/js/bootstrap.min.js}" src="../../static/js/ticketTableJS/bootstrap.min.js"></script>
<script>
    $(document).ready(function () {
        $('#data-table').DataTable({})
    });

    // 		$('#data-table tbody').on('click', function () {
    //          var tr = $(this).closest('tr');
    //          var row = table.row(tr);
    //          if (row.child.isShown()) {
    //              // This row is already open - close it
    //              row.child.hide();
    //              tr.removeClass('shown');
    //          }
    //          else {
    //              // Open this row
    //              row.child(format(row.data())).show();
    //              tr.addClass('shown');
    //          }
    //      })

// 刪除
    $(".btn-delete").click(function (e) {
        e.preventDefault(); // 取消原始動作
        let id = $(this).val();
        Swal.fire({
            icon: 'warning',
            title: '確定刪除?',
            text: "確認刪除後將不可復原",
            showCancelButton: true,
            confirmButtonColor: '#FF8D29',
            cancelButtonColor: '#FFCD38',
            confirmButtonText: '確認',
            cancelButtonText: '取消',
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                $(this).parent().submit();
            }
        })
    })

</script>

<!-- 判斷城市資料後再自動代入地區 -->
<script th:inline="javascript">
	window.addEventListener('load', function () {
		console.log("load complete");
		setTimeout(function () {
			console.log("I am the third log after 2 seconds");
			
			var city = /*[[${ticket.city}]]*/ '';

			console.log("city->"+city); 
			document.getElementById("city").value = city;
			// document.getElementById("city").value = "<th:value='*{city}'/>";
			//document.getElementById("city").dispatchEvent(new Event('change'));
			if(city!=null){
				$('#city').trigger("change");
				setTimeout(function () {
					var location = /*[[${ticket.location}]]*/ '';
					// document.getElementById("dist").value = "<th:value='*{location}'/>";
					document.getElementById("dist").value = location;
				}, 1000);
			}
		}, 1000);
		document.getElementById("sel").dispatchEvent(new Event('change'));
	})
</script>

<!-- tag -->
<script>
$("#sel").change(function () {
switch (parseInt($(this).val())) {
    case 0:
        $("#sel2 option").remove();
        break;
    case 1:
        $("#sel2 option").remove();
        var array = ["主題樂園"];
        //利用each遍歷array中的值並將每個值新增到Select中
        $.each(array, function (i, val) {
            $("#sel2").append($("<option value='" + array[i] + "'>" + array[i] + "</option>"));
        });
        break;
    case 2:
        $("#sel2 option").remove();
        var array = ["博物館&美術館"];
        //利用each遍歷array中的值並將每個值新增到Select中
        $.each(array, function (i, val) {
            $("#sel2").append($("<option value='" + array[i] + "'>" + array[i] + "</option>"));
        });
        break;
    case 3:
        $("#sel2 option").remove();
        var array = ["水族館&動物園"];
        //利用each遍歷array中的值並將每個值新增到Select中
        $.each(array, function (i, val) {
            $("#sel2").append($("<option value='" + array[i] + "'>" + array[i] + "</option>"));
        });
        break;
    case 4:
        $("#sel2 option").remove();
        var array = ["歷史景點"];
        //利用each遍歷array中的值並將每個值新增到Select中
        $.each(array, function (i, val) {
            $("#sel2").append($("<option value='" + array[i] + "'>" + array[i] + "</option>"));
        });
        break;
}
});
</script>

<!-- CKEDITOR -->
<script>CKEDITOR.replace('ticketIntro');</script>

<!-- 一鍵輸入 -->
<script>
$('#correctInput').click(function () {
    //對應ID值，不是NAME值
    $('#nameId').val('劍湖山世界主題樂園門票');
	//$('#descriptionId')
    CKEDITOR.instances.descriptionId.setData('<p>－ 推薦設施 －</p>  <ul> 	<li>飛天潛艇G5：園區內最具代表性的遊樂設施。延著劍湖山山勢量身打造的型鋼骨支架，帶你慢速攀升至高點，瀏覽大尖山蒼翠綠意美景，再以時速110公里垂直向下俯衝，體驗 5 G力瞬間快感。</li> 	<li>衝瘋飛車：亞洲首座「無底盤式」設計，全台灣最好玩雲霄飛車。360度翻天覆地瀏覽園區，準備好感受急速起伏失重刺激腎上腺素帶來的超high爽感，保證讓你連續尖叫120 秒。</li> 	<li>VR Dino飛越恐龍谷：體驗最夯恐龍元宇宙，戴上VR眼鏡感受沉浸式虛實結合，群龍環伺，帶你重返侏儸紀，驚嚇指數百分百！</li> 	<li>幸福摩天輪：搭乘全台海拔最高、聳立在大尖山上的巨大摩天輪，放眼眺望環繞古坑的大尖山美景及延綿嘉南的平原綠意，享受 15 分鐘醉心時光，拍下與美景的獨家記憶。</li> 	<li>小威の海盜村-水上樂園（7/1正式開園）：大碗公/龍捲風/尖叫無底洞/大船塢/漂漂河/造浪池維京巨浪</li> 	<li>大船塢 ：瘋狂打水戰結合各種淺池、滑道，交織出驚人的水戰迷宮，每個角度都充滿著獨特驚奇！</li> 	<li>大碗公：台灣唯一超激渦輪，衝破神秘滑道，讓你感受360度向心力，狂飆轉速的超high快感！</li> 	<li>造浪池維京巨浪：全台最長600秒造浪時間，沉浸在巨浪中，清涼感瞬間上升，隨著浪濤洶湧的造浪變化，彷彿置身鑽石海！</li> 	<li>尖叫無底洞：全台唯一水上極速自由落體體驗從3層樓的高度垂直下滑，享受每秒滑行7.8公尺的快感，360度滑道旋轉，目眩神迷的光影變化，全程10秒，FUN聲尖叫！</li> </ul>  <p>&nbsp;</p>  <p>－ 活動介紹 －</p>  <ul> 	<li>演出活動：花漾魔幻特技秀</li> 	<li>時間：每日13：30及20：00，每場演出約40分鐘。</li> 	<li>演出地點：彩虹劇場</li> 	<li>演出簡介：燈光漸暗，身懷絕技的蛙兒引領你進入萬花盛放的神秘世界，找好座位，神乎其技即將上演，快來看花兒蛻變而成的仙子「大耍花樣」！咋舌特技、勁歌熱舞、歡樂小丑與奇幻魔術交織成最磅礡的嘉年華盛會。</li> 	<li>演出時間如有異動，請依現場公告為主。</li> 	<li>為維護節目品質及智慧財產權，演出過程禁止「拍照、錄音、錄影」，謝謝您的配合。</li> 	<li>2022/7/1起 水樂園正式開放，水陸一起玩</li> </ul>  <p><img alt="" src="https://image.kkday.com/v2/image/get/w_960%2Cc_fit%2Cq_55%2Ct_webp/s1.kkday.com/product_32341/20220621023935_IQ74g/jpg" style="height:449px; width:720px" /></p>  <p>搭乘雲霄飛車，尖叫、吶喊挑戰極限</p>  <p><img alt="" src="https://image.kkday.com/v2/image/get/w_960%2Cc_fit%2Cq_55%2Ct_webp/s1.kkday.com/product_32341/20191016112122_NDArl/jpg" style="height:405px; width:720px" /></p>  <p>飛天潛艇G5 全長共384公尺，以140kw馬力攀上65公尺的高空，再以110公里時速、超越人體極限5個Ｇ的重力加速度，垂直向下俯衝！</p>  <p><img alt="" src="https://image.kkday.com/v2/image/get/w_960%2Cc_fit%2Cq_55%2Ct_webp/s1.kkday.com/product_32341/20211225110213_8Ya8Z/jpg" style="height:540px; width:720px" /></p>');
 	$('#ticketBriefIntroId').val('全亞洲第一個以維京海盜為主題的樂園，設置適合各種年齡層的設施，一同留下最美回憶');
//     $('#picker1').val('8:30 AM');
//     $('#picker2').val('5:30 PM');
    $('#phoneId').val('055825789');
    $('#countryId').val('台灣');

   	$('#city').val('雲林縣');
   	$('#city').trigger("change");
    setTimeout(function () {
		var location = '古坑鄉';
		document.getElementById("dist").value = location;
	}, 1000);
    
    //$('#dist').val('阿里山鄉');
    $('#addressId').val('67號');
 	$('#priceId').val('450');
 	$('#statusId').val('已提交');
    $('#sel').val('1');
    document.getElementById("sel").dispatchEvent(new Event('change'));
    $('#sel2').val('主題樂園');
    // $('#ticketStartDate').val('2022-07-29')
    // $('#ticketEndDate').val('2022-12-31')
    // $('#note').val('')
	
})
</script>


</body>

</html>