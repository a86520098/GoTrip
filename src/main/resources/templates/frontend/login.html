<!DOCTYPE html>
<html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
    <!-- Head -->
    <head>
        <title>立即登入GoTrip！</title>
        <!-- Meta-Tags -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="keywords" content="Existing Login Form Widget Responsive, Login Form Web Template, Flat Pricing Tables, Flat Drop-Downs, Sign-Up Web Templates, Flat Web Templates, Login Sign-up Responsive Web Template, Smartphone Compatible Web Template, Free Web Designs for Nokia, Samsung, LG, Sony Ericsson, Motorola Web Design">
        <script type="application/x-javascript">addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); }</script>
        <!-- //Meta-Tags -->
        <link th:href="@{css/loginCSS/popuo-box.css}" rel="stylesheet" type="text/css" media="all" />
        <!-- Style -->
        <link rel="stylesheet" th:href="@{css/loginCSS/style.css}" type="text/css" media="all">
        
    </head>
    <!-- //Head -->

    <!-- Body -->
    <body><h1>立即登入GoTrip！</h1>
        <div class="w3layoutscontaineragileits">
            <h2>Login here</h2>
            <form id=loginForm method="POST" th:action="@{/login}">
<!--     		<form id="loginForm" th:action="@{/loginUrl}" method="POST"> -->
<!--     		<input type="hidden" id="MESSAGE" th:value="${MESSAGE}"/> -->
                <input type="text" id="username" Name="username" placeholder="EMAIL" required>
                <input type="password" id="password" Name="password" placeholder="PASSWORD" required>
<!--                 <input type="hidden" name="${_csrf.parameterName}" th:value="${_csrf.token}" th:if="${_csrf}" /> -->
                <ul class="agileinfotickwthree">
                    <li><input type="checkbox" id="brand1" name="remember-me" value="true">
                        <label for="brand1">
                            <span></span>Remember me</label>
                            <a href="#">Forgot password?</a>
                    </li>
                </ul>
                

                
                <div class="aitssendbuttonw3ls">
                    <input type="submit" value="登入">
                 
                    
                    <div>   </div>
                    
	                <div class="aitssendbuttonw3ls">
						<button id="admin-login" type="button" class="btn btn-light mr-2 justify-content-end mr-4">
							管理者登入
						</button>
						<button id="dealer-login" type="button" class="btn btn-light mr-2 justify-content-end mr-4">
							店家登入
						</button>
						<button id="user-login" type="button" class="btn btn-warning justify-content-end">
							顧客登入
						</button>
					</div>
                    
                    <p>還沒有GoTrip會員？<span>→</span><a class="w3_play_icon1" href="#small-dialog1">點我加入！</a></p>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
        
        <!-- for register popup -->
        <div id="small-dialog1" class="mfp-hide">
            <div class="contact-form1">
                <div class="contact-w3-agileits">
                    <h3>Register Form</h3>
                    <form id="registerForm" method="POST" th:action="@{/register}" th:Object="${userAccountVO}" enctype="multipart/form-data" autocomplete="off">
<!--                         <div class="form-sub-w3ls"> -->
<!--                             <input placeholder="User Name"  type="text" name="ch_name" required> -->
<!--                             <div class="icon-agile"> -->
<!--                                 <i class="fa fa-user" aria-hidden="true"></i> -->
<!--                             </div> -->
<!--                         </div> -->
                        <div class="form-sub-w3ls">
                            <input id="username" placeholder="Email" class="mail" type="email" name="username" required onchange="CheckEmail()">
                            <div class="icon-agile">
                                <i class="fa fa-envelope-o" aria-hidden="true"></i>
                            </div>
                            <span id="message" style="position:absolute ; right:70px; top:37%"></span>
                        </div>
                        <div class="form-sub-w3ls">
                            <input id="pwd1" placeholder="Password"  type="password" name="password" required>
                            <div class="icon-agile">
                                <i class="fa fa-unlock-alt" aria-hidden="true"></i>
                            </div>
                        </div>
                        <div class="form-sub-w3ls">
                            <input id="pwd2" placeholder="Confirm Password"  type="password" name="passwd" required onkeyup="validate()">
                            <div class="icon-agile">
                                <i class="fa fa-unlock-alt" aria-hidden="true"></i>
                            </div>
                            <span id="checkMsg" style="position:absolute ; right:70px; top:66%"></span>
                        </div>
<!--                         <input type="hidden" name="authority" value="user"> -->
<!--                         <div class="form-sub-w3ls"> -->
<!--                             <input placeholder="Confirm Password"  type="password" name="password" required> -->
<!--                             <div class="icon-agile"> -->
<!--                                 <i class="fa fa-unlock-alt" aria-hidden="true"></i> -->
<!--                             </div> -->
<!--                         </div> -->
                        <div class="login-check">
                            <label class="checkbox"><input type="checkbox" name="checkbox" checked="">I Accept Terms & Conditions</label>
                        </div>
                        <div class="submit-w3l">
                            <input id="submit" type="submit" value="註冊">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- //for register popup -->
        
        <div class="w3footeragile">
            <p>
            </p>
        </div>
        
        <script th:src="@{/js/userdata.js}"></script>
        <script th:src="@{/js/loginJS/lib/jquery-2.1.4.min.js}"></script>
        <!-- pop-up-box-js-file -->
        <script th:src="@{/js/loginJS/lib/jquery.magnific-popup.js}" type="text/javascript"></script>
        <!--//pop-up-box-js-file -->
        <script>
        $(document).ready(function() {		
            $('.w3_play_icon,.w3_play_icon1,.w3_play_icon2').magnificPopup({			
                type: 'inline',			
                fixedContentPos: false,			
                fixedBgPos: true,			
                overflowY: 'auto',			
                closeBtnInside: true,			
                preloader: false,			
                midClick: true,			
                removalDelay: 300,			
                mainClass: 'my-mfp-zoom-in'		
                
                });																				
            });
        </script>
        
         <script>
  	function CheckEmail() {

		var email = document.getElementById("username").value;
// 		var res = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
// 		var flag1 = res.test(email);
// 		if (flag1) {
			$.ajax({
				type : "POST",
				url : "./CheckEmail",
				data : "username=" + username,
				success : function(data) {
					if (data == true) {
					document.getElementById("message").innerHTML = "<font color='black'>此信箱可以使用</font>"
					document.getElementById('submit').disabled=false;
					return true;
					} else {
					document.getElementById("message").innerHTML = "<font color='red'>此信箱已被註冊</font>";
					document.getElementById('submit').disabled=true;
					return false;
					}
				}
			});
// 		} else {
// 			document.getElementById("s_email").innerHTML = "<p class='wrong'>Email格式錯誤</p>";
// 			document.getElementById('submit').disabled=true;
// 			return false;
// 		}
			
	}
  	
  	
// 	檢查兩次密碼輸入是否相同
    function validate() {
        var pwd1 = document.getElementById("pwd1").value;
        var pwd2 = document.getElementById("pwd2").value;
       if(pwd1 == pwd2) {
         document.getElementById("checkMsg").innerHTML="<font color='black'>OK</font>";
         document.getElementById("submit").disabled = false;
        }
        else {
         document.getElementById("checkMsg").innerHTML="<font color='red'>兩次密碼不同</font>";
          document.getElementById("submit").disabled = true;
        }
    }
  	
  	</script>
  	
  	
        
    </body>
    
    <!-- //Body -->
    
    </html>